#  
·数据链路层使用物理层提供的“比特传输服务”  
·数据链路层为网络层提供服务，将网络层的IP数据报（分组）封装成帧，传输给下一个相邻节点的对等实体
·逻辑链路：数据链路层需要基于“物理链路”，实现相邻节点之间逻辑上无差错的“数据链路（逻辑链路）”  

## 功能一 封装成帧(组帧)  

1.**帧定界**  
如何让接收方能够确定帧的界限

2.**透明传输**    
接收方要能够去除“帧定界”的附加信息，把帧“恢复原貌”  

#  
**字符计数法**  

在每个帧开头，用一个定长计数字段表示帧长;  
最大缺点：任何一个计数字段出错，都会导致后续所有帧无法定界  

**字节填充法**  
每个帧首部添加控制字符SOH，尾部添加控制字符EOT;  
为了避免歧义，可以添加转义字符ESC  

**零比特填充法(位填充法)**  
用一个特殊比特串“01111110”表示帧开始/结束  
为了避免歧义，发送方需要对帧的数据部分进行处理，每当遇到连续5个1，就填充一个0  
接受方需要对帧的数据部分进行逆处理  
HDLC协议和PPP协议使用零比特填充法

**违规编码法**  
曼彻斯特编码(IEEE标准)
上跳0下跳1，中必变，如果周期中间不跳变，则违规；
在帧的开头和结尾各插入一个时钟的违规信号；
*这种帧定界方式只适用于**物理层用曼彻斯特编码**的协议（如 IEEE 802.3 最早期的以太网）*

## 功能二 差错控制  

目标：发现并解决一个帧内部的位错

**解决方案一**

接收方发现比特错后丢弃帧，并通知发送方重传帧;

- 如何发现比特错？
  1. 奇偶校验码
     在整个校验码前加入一个奇偶校验位
     奇校验保证校验位＋信息位1为奇数  **1**1001101
     偶校验同理。偶校验所有信息位做异或运算产生校验位，发送方和接收方都可以用这个方法
  2. 循环冗余校验码
     思想：数据发送、接收方约定一个除数
     ![alt text](image.png)
     给一个信息码，左移R位(二项式最高次幂)然后与生成二项式相除，余数是CRC码。信息位与CRC码相拼得发送帧，接受的信息码与CRC码相除比对是否出错。


**解决方案二**

由接收方发现并纠正比特错误;

*海明码设计思路：将信息位分组进行偶校验->多个校验位*
n个信息位，k个校验位；共n+k位；
k个校验位可以表示2^k种状态  ->  即2^k>=n+k+1
![74930367987](C:\Users\30875\AppData\Local\Temp\1749303679878.png)

![74930401493](C:\Users\30875\AppData\Local\Temp\1749304014939.png)

计网应该不考这个，408会考



## 功能三 可靠传输  

**滑动窗口机制**

- 发送窗口WT：发送方当前允许发送的帧；
- 接收窗口WR：接收方当前允许接收的帧
  - 若收到接收窗口以外的帧，直接丢弃
  - 由接收方通过“确认机制”控制发送方的窗口向前滑动，从而实现“流量控制”

#### 停止-等待协议（S-W）

- **滑动窗口机制**

  WT与WR都是1

- **确认机制**

- **重传机制**

- **帧编号**

  要求 WT+WR<=2^n，n代表用n bit标识每个帧
  发送方发送一个数据帧Data*0*，接收方收到后会返回一个确认帧ACK*0*（接收方确认无误后才会接收）

## 功能四 流量控制  
## 功能五 介质访问控制  